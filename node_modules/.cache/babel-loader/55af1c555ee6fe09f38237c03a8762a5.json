{"ast":null,"code":"import _objectSpread from\"/home/iryna/Desktop/NodeJS-in-AWS-Training/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/iryna/Desktop/NodeJS-in-AWS-Training/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Button from'@material-ui/core/Button';import Grid from'@material-ui/core/Grid';import{ProductSchema}from\"models/Product\";import{Formik,Field}from'formik';import{TextField}from'formik-material-ui';import axios from'axios';import{useHistory,useParams}from'react-router-dom';import PaperLayout from\"components/PaperLayout/PaperLayout\";import Typography from\"@material-ui/core/Typography\";import API_PATHS from\"constants/apiPaths\";var Form=function Form(props){var dirty=props.dirty,isSubmitting=props.isSubmitting,isValid=props.isValid,handleSubmit=props.handleSubmit;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,autoComplete:\"off\"},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Field,{component:TextField,name:\"title\",label:\"Title\",fullWidth:true,autoComplete:\"off\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Field,{component:TextField,name:\"description\",label:\"Description\",fullWidth:true,autoComplete:\"off\",multiline:true,required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:4},/*#__PURE__*/React.createElement(Field,{component:TextField,name:\"price\",label:\"Price ($)\",fullWidth:true,autoComplete:\"off\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:4},/*#__PURE__*/React.createElement(Field,{component:TextField,name:\"count\",label:\"Count\",fullWidth:true,autoComplete:\"off\",required:true})),/*#__PURE__*/React.createElement(Grid,{item:true,container:true,xs:12,justify:\"space-between\"},/*#__PURE__*/React.createElement(Button,{color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",disabled:!dirty||isSubmitting||!isValid},\"Save Product\"))));};var emptyValues=ProductSchema.cast();export default function PageProductForm(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var onSubmit=function onSubmit(values){var formattedValues=ProductSchema.cast(values);var productToSave=id?_objectSpread(_objectSpread({},ProductSchema.cast(formattedValues)),{},{id:id}):formattedValues;axios.put(\"\".concat(API_PATHS.bff,\"/product\"),productToSave).then(function(){return history.push('/admin/products');});};useEffect(function(){if(!id){setIsLoading(false);return;}axios.get(\"\".concat(API_PATHS.bff,\"/product/\").concat(id)).then(function(res){setProduct(res.data);setIsLoading(false);});},[id]);if(isLoading)return/*#__PURE__*/React.createElement(\"p\",null,\"loading...\");return/*#__PURE__*/React.createElement(PaperLayout,null,/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h4\",align:\"center\"},id?'Edit product':'Create new product'),/*#__PURE__*/React.createElement(Formik,{initialValues:product||emptyValues,validationSchema:ProductSchema,onSubmit:onSubmit},function(props){return/*#__PURE__*/React.createElement(Form,props);}));}","map":{"version":3,"sources":["/home/iryna/Desktop/NodeJS-in-AWS-Training/src/components/pages/PageProductForm/PageProductForm.tsx"],"names":["React","useEffect","useState","Button","Grid","ProductSchema","Formik","Field","TextField","axios","useHistory","useParams","PaperLayout","Typography","API_PATHS","Form","props","dirty","isSubmitting","isValid","handleSubmit","emptyValues","cast","PageProductForm","history","id","product","setProduct","isLoading","setIsLoading","onSubmit","values","formattedValues","productToSave","put","bff","then","push","get","res","data"],"mappings":"iUAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,OAAiBC,aAAjB,KAAqC,gBAArC,CACA,OAAQC,MAAR,CAAgBC,KAAhB,KAAuD,QAAvD,CACA,OAAQC,SAAR,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,CAAoBC,SAApB,KAAoC,kBAApC,CACA,MAAOC,CAAAA,WAAP,KAAwB,oCAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,KAAD,CAAsC,IAK/CC,CAAAA,KAL+C,CAsB7CD,KAtB6C,CAK/CC,KAL+C,CAM/CC,YAN+C,CAsB7CF,KAtB6C,CAM/CE,YAN+C,CAO/CC,OAP+C,CAsB7CH,KAtB6C,CAO/CG,OAP+C,CAU/CC,YAV+C,CAsB7CJ,KAtB6C,CAU/CI,YAV+C,CAwBjD,mBACE,4BAAM,QAAQ,CAAEA,YAAhB,CAA8B,YAAY,CAAC,KAA3C,eACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,KAAD,EACE,SAAS,CAAEZ,SADb,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAC,OAHR,CAIE,SAAS,KAJX,CAKE,YAAY,CAAC,KALf,CAME,QAAQ,KANV,EADF,CADF,cAWE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,eACE,oBAAC,KAAD,EACE,SAAS,CAAEA,SADb,CAEE,IAAI,CAAC,aAFP,CAGE,KAAK,CAAC,aAHR,CAIE,SAAS,KAJX,CAKE,YAAY,CAAC,KALf,CAME,SAAS,KANX,CAOE,QAAQ,KAPV,EADF,CAXF,cAsBE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,KAAD,EACE,SAAS,CAAEA,SADb,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAC,WAHR,CAIE,SAAS,KAJX,CAKE,YAAY,CAAC,KALf,CAME,QAAQ,KANV,EADF,CAtBF,cAgCE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,eACE,oBAAC,KAAD,EACE,SAAS,CAAEA,SADb,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAC,OAHR,CAIE,SAAS,KAJX,CAKE,YAAY,CAAC,KALf,CAME,QAAQ,KANV,EADF,CAhCF,cA0CE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,SAAS,KAApB,CAAqB,EAAE,CAAE,EAAzB,CAA6B,OAAO,CAAC,eAArC,eACE,oBAAC,MAAD,EACE,KAAK,CAAC,SADR,WADF,cAME,oBAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAC,SAHR,CAIE,QAAQ,CAAE,CAACS,KAAD,EAAUC,YAAV,EAA0B,CAACC,OAJvC,iBANF,CA1CF,CADF,CADF,CA8DD,CAtFD,CAwFA,GAAME,CAAAA,WAAgB,CAAGhB,aAAa,CAACiB,IAAd,EAAzB,CAEA,cAAe,SAASC,CAAAA,eAAT,EAA2B,CACxC,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CADwC,eAE3BC,SAAS,EAFkB,CAEjCc,EAFiC,YAEjCA,EAFiC,eAGVvB,QAAQ,CAAiB,IAAjB,CAHE,wCAGjCwB,OAHiC,eAGxBC,UAHwB,8BAINzB,QAAQ,CAAU,IAAV,CAJF,yCAIjC0B,SAJiC,eAItBC,YAJsB,eAMxC,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,MAAD,CAA0B,CACzC,GAAMC,CAAAA,eAAe,CAAG3B,aAAa,CAACiB,IAAd,CAAmBS,MAAnB,CAAxB,CACA,GAAME,CAAAA,aAAa,CAAGR,EAAE,gCAAOpB,aAAa,CAACiB,IAAd,CAAmBU,eAAnB,CAAP,MAA4CP,EAAE,CAAFA,EAA5C,GAAkDO,eAA1E,CACAvB,KAAK,CAACyB,GAAN,WAAapB,SAAS,CAACqB,GAAvB,aAAsCF,aAAtC,EACGG,IADH,CACQ,iBAAMZ,CAAAA,OAAO,CAACa,IAAR,CAAa,iBAAb,CAAN,EADR,EAED,CALD,CAOApC,SAAS,CAAC,UAAM,CACd,GAAI,CAACwB,EAAL,CAAS,CACPI,YAAY,CAAC,KAAD,CAAZ,CACA,OACD,CACDpB,KAAK,CAAC6B,GAAN,WAAaxB,SAAS,CAACqB,GAAvB,qBAAsCV,EAAtC,GACGW,IADH,CACQ,SAAAG,GAAG,CAAI,CACXZ,UAAU,CAACY,GAAG,CAACC,IAAL,CAAV,CACAX,YAAY,CAAC,KAAD,CAAZ,CACD,CAJH,EAKD,CAVQ,CAUN,CAACJ,EAAD,CAVM,CAAT,CAYA,GAAIG,SAAJ,CAAe,mBAAO,0CAAP,CAEf,mBACE,oBAAC,WAAD,mBACE,oBAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,CAAwC,KAAK,CAAC,QAA9C,EACGH,EAAE,CAAG,cAAH,CAAoB,oBADzB,CADF,cAIE,oBAAC,MAAD,EACE,aAAa,CAAEC,OAAO,EAAIL,WAD5B,CAEE,gBAAgB,CAAEhB,aAFpB,CAGE,QAAQ,CAAEyB,QAHZ,EAKG,SAACd,KAAD,qBAAsC,oBAAC,IAAD,CAAUA,KAAV,CAAtC,EALH,CAJF,CADF,CAcD","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport {Product, ProductSchema} from \"models/Product\";\nimport {Formik, Field, FormikProps, FormikValues} from 'formik';\nimport {TextField} from 'formik-material-ui';\nimport axios from 'axios';\nimport {useHistory, useParams} from 'react-router-dom';\nimport PaperLayout from \"components/PaperLayout/PaperLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport API_PATHS from \"constants/apiPaths\";\n\nconst Form = (props: FormikProps<FormikValues>) => {\n  const {\n    // values,\n    // touched,\n    // errors,\n    dirty,\n    isSubmitting,\n    isValid,\n    // handleChange,\n    // handleBlur,\n    handleSubmit,\n    // handleReset,\n    // setFieldValue,\n    // isEditMode,\n    // onCancel,\n    // isButtonContact,\n    // setTouched,\n    // isButtonAddAndRedirect,\n    // setShouldRedirect,\n    // submitForm,\n    // onGetCitizen,\n    // shouldConfirmLeave,\n  } = props;\n\n  return (\n    <form onSubmit={handleSubmit} autoComplete=\"off\">\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Field\n            component={TextField}\n            name=\"title\"\n            label=\"Title\"\n            fullWidth\n            autoComplete=\"off\"\n            required\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <Field\n            component={TextField}\n            name=\"description\"\n            label=\"Description\"\n            fullWidth\n            autoComplete=\"off\"\n            multiline\n            required\n          />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <Field\n            component={TextField}\n            name=\"price\"\n            label=\"Price ($)\"\n            fullWidth\n            autoComplete=\"off\"\n            required\n          />\n        </Grid>\n        <Grid item xs={12} sm={4}>\n          <Field\n            component={TextField}\n            name=\"count\"\n            label=\"Count\"\n            fullWidth\n            autoComplete=\"off\"\n            required\n          />\n        </Grid>\n        <Grid item container xs={12} justify=\"space-between\">\n          <Button\n            color=\"primary\"\n          >\n            Cancel\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={!dirty || isSubmitting || !isValid}\n          >\n            Save Product\n          </Button>\n        </Grid>\n      </Grid>\n    </form>\n  );\n}\n\nconst emptyValues: any = ProductSchema.cast();\n\nexport default function PageProductForm() {\n  const history = useHistory();\n  const {id} = useParams();\n  const [product, setProduct] = useState<Product | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  const onSubmit = (values: FormikValues) => {\n    const formattedValues = ProductSchema.cast(values);\n    const productToSave = id ? {...ProductSchema.cast(formattedValues), id} : formattedValues;\n    axios.put(`${API_PATHS.bff}/product`, productToSave)\n      .then(() => history.push('/admin/products'));\n  };\n\n  useEffect(() => {\n    if (!id) {\n      setIsLoading(false);\n      return;\n    }\n    axios.get(`${API_PATHS.bff}/product/${id}`)\n      .then(res => {\n        setProduct(res.data);\n        setIsLoading(false);\n      });\n  }, [id])\n\n  if (isLoading) return <p>loading...</p>;\n\n  return (\n    <PaperLayout>\n      <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n        {id ? 'Edit product' : 'Create new product'}\n      </Typography>\n      <Formik\n        initialValues={product || emptyValues}\n        validationSchema={ProductSchema}\n        onSubmit={onSubmit}\n      >\n        {(props: FormikProps<FormikValues>) => <Form {...props} />}\n      </Formik>\n    </PaperLayout>\n  );\n}"]},"metadata":{},"sourceType":"module"}